{{ define "main" }}

  <!-- x-data parameter defines context and methods for Get started section -->
  <main class="ml-sm-auto col-md-9 col-lg-10 px-4 pt-0 pt-md-11"
  {{ if eq .Section "get-started" }}
  x-data="{ 
    stack: new URLSearchParams(location.search).get('stack') || 'php',
    switchStack(targetStack) { 
      this.stack = targetStack
      const url = new URL(window.location.href);

      const targetStackString = targetStack
        .toString()
        .toLowerCase()
        .replace('.', '');

      url.searchParams.set('stack', targetStackString);
      history.pushState(null, document.title, url.toString());
    }
  }"
  {{ end }}>
    <div class="row pt-3">

        <div class="col-xl-12 order-xl-1 duik-content">

          <!-- Platform.sh tier-gated features -->
          {{ partial "tiered-features/banner.html" . }}

          {{ partial "editpagebutton.html" . }}

          <!-- Page title -->
          <div class="page-title">
            <h1>{{ .Title }}</h1>
          </div>

          <div class="content-grid">

            <div class="order-2 right-sidebar-wrapper">
              <!-- Table of contents -->
              {{ if and (ne .Params.toc false) (ne .TableOfContents "<nav id=\"TableOfContents\"></nav>") }}
                <div class="toc">
                  <h3>On this page</h3>
                  {{ .TableOfContents }}
                </div>
              {{ end }}

              <!-- Feedback form -->
              {{ partial "feedback-form" }}
            </div>

            <div class="content-wrapper">

              <!-- Add the stack picker for Get started section -->
              {{ if and ( eq .Section "get-started" ) ( ne .Title "Introduction" ) }}
                {{ partial "get-started/stack-picker" }}
              {{ end }}

              <!-- Page content, anchorized -->
              {{ partial "headline-hash.html" .Content }}
            </div>

          </div>

        </div>
      </div>

    <!-- Footer -->
    {{ partial "footer/footer" . }}

  </main>

{{ end }}
